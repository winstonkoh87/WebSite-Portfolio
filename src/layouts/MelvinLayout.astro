---
interface Props {
	title: string;
    description?: string;
    image?: string;
}

const { 
    title, 
    description = "Portfolio of Melvin Lim | Officer, Scholar, Citizen. Exploring the intersection of Law, Public Policy, and Restorative Justice in Singapore.", 
    image = "/assets/images/projects/melvin/hero-portrait.png" 
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, "https://winstonkoh87.github.io");

const schema = JSON.stringify({
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Melvin Lim",
  "url": "https://winstonkoh87.github.io/projects/melvin",
  "image": `https://winstonkoh87.github.io${image}`,
  "sameAs": [
    "https://www.linkedin.com/in/melvinlimjunwei",
    "https://www.instagram.com/melv._.innnn/"
  ],
  "jobTitle": "Student Leader & Aspiring Legal Scholar",
  "worksFor": {
    "@type": "Organization",
    "name": "Singapore Armed Forces"
  },
  "alumniOf": {
    "@type": "EducationalOrganization",
    "name": "St Andrew's Junior College"
  },
  "description": description
});
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />

        <!-- SEO -->
		<title>{title} | Melvin Lim - Law & Policy Portfolio</title>
        <meta name="description" content={description} />
        <link rel="canonical" href={canonicalURL} />
        <meta name="author" content="Melvin Lim" />
        <meta name="keywords" content="Melvin Lim, Singapore, Law Student, Public Policy, Student Leader, SAJC, SAF Young Leader, Portfolio" />

        <!-- Open Graph -->
        <meta property="og:type" content="website" />
        <meta property="og:url" content={canonicalURL} />
        <meta property="og:title" content={`${title} | Melvin Lim - Law & Policy`} />
        <meta property="og:description" content={description} />
        <meta property="og:image" content={new URL(image, "https://winstonkoh87.github.io")} />

        <!-- Schema.org -->
        <script type="application/ld+json" set:html={schema} />

        <!-- Fonts: Playfair Display (Serif) & Inter (Sans) -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
	</head>
	<body>
        <div class="melvin-shell">
            <header class="melvin-nav">
                <div class="nav-container">
                    <a href="/projects/melvin" class="nav-brand">
                        <span class="brand-name">MELVIN.</span>
                    </a>
                    
                    <button id="mobile-menu-btn" aria-label="Toggle menu">
                        <span class="hamburger"></span>
                    </button>

                    <nav class="nav-links">
                        <a href="/projects/melvin" class="nav-link">Now</a>
                        <a href="/projects/melvin/vision" class="nav-link">Vision</a>
                        <a href="/projects/melvin/essays" class="nav-link">Library</a>
                        <a href="/projects/melvin/service" class="nav-link">Service</a>
                        <a href="/projects/melvin/contact" class="nav-link contact-btn">Connect</a>
                    </nav>
                </div>
            </header>

            <main>
                <slot />
            </main>

            <footer class="melvin-footer">
                <div class="footer-content">
                    <p class="footer-motto">"Discipline for outcomes. Warmth for people."</p>
                    
                    <div class="footer-socials">
                        <a href="https://www.linkedin.com/in/melvinlimjunwei/" target="_blank" rel="noopener noreferrer">LinkedIn</a>
                        <span class="social-separator">/</span>
                        <a href="https://www.instagram.com/melv._.innnn/" target="_blank" rel="noopener noreferrer">Instagram</a>
                        <span class="social-separator">/</span>
                        <a href="mailto:melvinlim976@gmail.com">Email</a>
                    </div>

                    <div class="footer-interests">
                        <span>Explorer of Trails & Hikes</span>
                        <span class="social-separator">â€¢</span>
                        <span>Aspiring Gastronome</span>
                    </div>

                    <p class="footer-copyright">
                        &copy; {new Date().getFullYear()} Melvin Lim. Built for the Future. 
                        <span style="opacity: 0.3; margin: 0 0.5rem;">|</span> 
                        <a href="/portfolio" style="color: inherit; text-decoration: none; opacity: 0.5; transition: opacity 0.2s;" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.5'">Return to Main Portfolio</a>
                    </p>
                </div>
            </footer>
        </div>
        
        <script>
            // Mobile Menu Toggle
            const mobileBtn = document.getElementById('mobile-menu-btn');
            const navLinks = document.querySelector('.nav-links');

            if (mobileBtn && navLinks) {
                mobileBtn.addEventListener('click', () => {
                    navLinks.classList.toggle('active');
                    mobileBtn.classList.toggle('open');
                });
            }
        </script>
	</body>
    <!-- Floating WhatsApp Button -->
    <a href="https://wa.me/6591234567?text=Hi%20Melvin,%20I%20saw%20your%20portfolio%20and%20wanted%20to%20connect." class="whatsapp-float" target="_blank" rel="noopener noreferrer" aria-label="Chat on WhatsApp">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.506-.669-.516-.173-.009-.371-.009-.57-.009-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/></svg>
    </a>

<style is:global>
    /* WhatsApp Floating Button */
    .whatsapp-float {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        background: #25D366;
        color: white;
        width: 3.5rem;
        height: 3.5rem;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        z-index: 1000;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .whatsapp-float:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 16px rgba(37, 211, 102, 0.4);
    }
    /* Design Tokens - Soulful Stoic (Dark Mode) */
    :root {
        --mv-bg: #0a0a0a;       /* Off-black */
        --mv-surface: #111111;  /* Slightly lighter for cards */
        --mv-text-main: #ededed;
        --mv-text-muted: #888888;
        --mv-accent: #d4af37;   /* Gold (Subtle) */
        --mv-font-serif: 'Playfair Display', serif;
        --mv-font-sans: 'Inter', sans-serif;
    }

    /* Reset & Base */
    html {
        background-color: var(--mv-bg);
        color: var(--mv-text-muted);
        font-family: var(--mv-font-sans);
        scroll-behavior: smooth;
    }

    body {
        margin: 0;
        padding: 0;
    }

    /* Placeholders */
    .mv-placeholder {
        background: #1a1a1a;
        border: 1px dashed var(--mv-text-muted);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--mv-text-muted);
        font-family: var(--mv-font-mono);
        font-size: 0.8rem;
        text-align: center;
        padding: 1rem;
        position: relative;
        overflow: hidden;
    }

    .mv-placeholder::before {
        content: 'ðŸ“·';
        display: block;
        margin-bottom: 0.5rem;
        font-size: 1.5rem;
        opacity: 0.5;
    }
    
    h1, h2, h3, h4, h5, h6 {
        font-family: var(--mv-font-serif);
        color: var(--mv-text-main);
        font-weight: 400;
    }

    /* Navigation */
    .melvin-nav {
        position: fixed;
        top: 0;
        width: 100%;
        background: rgba(10, 10, 10, 0.8);
        backdrop-filter: blur(12px);
        z-index: 1000;
        border-bottom: 1px solid rgba(255, 255, 255, 0.03);
    }

    .nav-container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 1.5rem 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .brand-name {
        font-family: var(--mv-font-sans);
        font-weight: 900;
        font-size: 1.2rem;
        color: var(--mv-text-main);
        letter-spacing: -0.02em;
        text-transform: uppercase;
    }

    .nav-links {
        display: flex;
        gap: 2rem;
        align-items: center;
    }

    .nav-link {
        text-decoration: none;
        color: var(--mv-text-muted);
        font-size: 0.9rem;
        font-weight: 500;
        transition: color 0.2s;
    }

    .nav-link:hover {
        color: var(--mv-text-main);
    }

    .contact-btn {
        background: var(--mv-text-main);
        color: var(--mv-bg);
        padding: 0.5rem 1.2rem;
        border-radius: 100px;
        font-weight: 600;
    }

    .contact-btn:hover {
        background: #fff;
        color: #000;
        transform: scale(1.02);
    }

    /* Footer */
    .melvin-footer {
        padding: 6rem 2rem 4rem 2rem;
        text-align: center;
        border-top: 1px solid rgba(255,255,255,0.05);
        margin-top: 6rem;
    }

    .footer-motto {
        font-family: var(--mv-font-serif);
        font-style: italic;
        color: var(--mv-text-muted);
        margin-bottom: 1rem;
        font-size: 1.1rem;
    }

    .footer-copyright {
        font-size: 0.8rem;
        opacity: 0.4;
    }

    .container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 0 2rem;
    }

    /* Mobile Menu */
    .hamburger {
        display: none;
    }

    @media (max-width: 768px) {
        .hamburger {
            display: block;
            width: 24px;
            height: 2px;
            background: var(--mv-text-main);
            position: relative;
        }
        
        .hamburger::before, .hamburger::after {
            content: '';
            position: absolute;
            width: 24px;
            height: 2px;
            background: var(--mv-text-main);
            left: 0;
        }

        .hamburger::before { top: -6px; }
        .hamburger::after { top: 6px; }

        .nav-links {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background: var(--mv-bg);
            flex-direction: column;
            padding: 2rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .nav-links.active {
            display: flex;
        }
    }
    /* Footer Socials */
    .footer-socials {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin: 1.5rem 0;
        font-family: var(--mv-font-sans);
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 0.1em;
    }

    .footer-socials a {
        color: var(--mv-text-main);
        text-decoration: none;
        position: relative;
        transition: color 0.2s;
    }

    .footer-socials a::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 1px;
        background: var(--mv-accent);
        bottom: -4px;
        left: 0;
        transform: scaleX(0);
        transform-origin: right;
        transition: transform 0.3s ease;
    }

    .footer-socials a:hover {
        color: var(--mv-accent);
    }

    .footer-socials a:hover::after {
        transform: scaleX(1);
        transform-origin: left;
    }

    .social-separator {
        color: var(--mv-text-muted);
        opacity: 0.5;
    }

    .footer-interests {
        margin-top: 1rem;
        font-size: 0.75rem;
        color: var(--mv-text-muted);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        opacity: 0.6;
    }
</style>
